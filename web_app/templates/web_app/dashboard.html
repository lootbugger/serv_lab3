<!doctype html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ú–µ–¥–∏—á–Ω–∞ –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-light">
    <div class="container py-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <h1 class="fw-bold text-primary">üè• –ê–Ω–∞–ª—ñ—Ç–∏—á–Ω–∞ –ü–∞–Ω–µ–ª—å</h1>
          <p class="text-muted">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ñ–∑–∏—Ç—ñ–≤ —Ç–∞ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏</p>
        </div>
        <div>
          <a href="{% url 'doctor_list' %}" class="btn btn-outline-secondary"
            >‚¨ÖÔ∏è –î–æ —Å–ø–∏—Å–∫—É –ª—ñ–∫–∞—Ä—ñ–≤</a
          >
          <a
            href="{% url 'api_analytics' %}"
            target="_blank"
            class="btn btn-outline-dark"
            >üîó JSON API</a
          >
        </div>
      </div>

      <div class="card p-3 mb-4 shadow-sm border-0">
        <form method="get" class="row g-3 align-items-end">
          <div class="col-md-4">
            <label class="form-label fw-bold">–§—ñ–ª—å—Ç—Ä –ø–æ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ—Å—Ç—ñ:</label>
            <select name="speciality" class="form-select">
              <option value="All">–í—Å—ñ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ—Å—Ç—ñ</option>
              {% for spec in all_specs %}
              <option
                value="{{ spec }}"
                {%
                if
                spec=""
                ="selected_spec"
                %}selected{%
                endif
                %}
              >
                {{ spec }}
              </option>
              {% endfor %}
            </select>
          </div>
          <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">
              –ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏
            </button>
          </div>
        </form>
      </div>

      {% if message %}
      <div class="alert alert-warning text-center">{{ message }}</div>
      {% else %}
      <div class="row mb-4 g-3">
        <div class="col-md-3">
          <div class="card p-3 text-white bg-primary metric-card h-100">
            <h3>{{ stats.total_revenue }} ‚Ç¥</h3>
            <p class="mb-0">–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∏—Ä—É—á–∫–∞</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card p-3 text-white bg-success metric-card h-100">
            <h3>{{ stats.total_visits }}</h3>
            <p class="mb-0">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–∑–∏—Ç—ñ–≤</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card p-3 text-white bg-info metric-card h-100">
            <h3>{{ stats.avg_check }} ‚Ç¥</h3>
            <p class="mb-0">–°–µ—Ä–µ–¥–Ω—ñ–π —á–µ–∫</p>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card p-3 text-white bg-warning metric-card h-100">
            <h3 class="text-dark">{{ stats.max_check }} ‚Ç¥</h3>
            <p class="mb-0 text-dark">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–∞—Ö—É–Ω–æ–∫</p>
          </div>
        </div>
      </div>

      <div class="row g-4">
        <div class="col-md-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">{{ graphs.chart1|safe }}</div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">{{ graphs.chart2|safe }}</div>
          </div>
        </div>

        <div class="col-12">
          <div class="card shadow-sm border-0">
            <div class="card-body">{{ graphs.chart3|safe }}</div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">{{ graphs.chart4|safe }}</div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card shadow-sm border-0 h-100">
            <div class="card-body">{{ graphs.chart5|safe }}</div>
          </div>
        </div>

        <div class="col-12">
          <div class="card shadow-sm border-0">
            <div class="card-body">{{ graphs.chart6|safe }}</div>
          </div>
        </div>
      </div>
      {% endif %}
    </div>
  </body>
</html>
